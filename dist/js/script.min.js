"use strict";

window.onload = function () {
  var btnPasteText = document.querySelector('.photo-board-btn-paste-text');
  var photoDashboard = document.querySelector('.photo-board-dasboard');
  var inputLabel = document.querySelector('.photo-board-dasboard-input');
  var btnAddSmile = document.querySelector('.photo-board-btn-add-smile');
  var changeBAckgoundBtn = document.querySelector('.photo-board-btn-change-back');
  var photoBucket = document.querySelector('.photo-board-btn-bucket');
  var inpPhoto = document.getElementById('inpPhoto');
  var downloadPhoto = document.querySelector('.download-photo');
  var downloadDream = document.querySelector('.download-dream');
  var simplePhotoOne = document.querySelector('.simple-photo-one');
  var simplePhotoTwo = document.querySelector('.simple-photo-two');
  var simplePhotoThree = document.querySelector('.simple-photo-three');
  var simplePhotoFour = document.querySelector('.simple-photo-four');
  var simplePhotoFive = document.querySelector('.simple-photo-five');
  var emojiKeyboard = document.querySelector('.emoji-keyboard');
  var emojiKeyboardClose = document.querySelector('.emoji-keyboard-close');
  var previewPhoto = document.querySelector('.preview-photo .photo');
  var modalAddPhoto = document.querySelector('.modal-add-photo');
  var moneyPhoto = document.querySelector('.money');
  var hobbiesPhoto = document.querySelector('.hobbies');
  var healthPhoto = document.querySelector('.health');
  var lovePhoto = document.querySelector('.love');
  var familyLeft = document.querySelector('.family .left');
  var familyRight = document.querySelector('.family .right');
  var travelOne = document.querySelector('.travel .one');
  var travelTwo = document.querySelector('.travel .two');
  var travelThree = document.querySelector('.travel .three');
  var photoBoardDashboard = document.querySelector(".photo-board-dasboard-photos");
  var initBody = document.querySelector('body').outerHTML;
  var currentNode = null;
  btnPasteText.addEventListener('click', function () {
    inputLabel.focus();
  });

  var clearBackground = function clearBackground(node, pathImg) {
    var reader = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    node.style = "\n            background-image: ".concat(reader ? "url(".concat(pathImg, ")") : pathImg, ";\n            background-repeat: no-repeat;\n            background-size: cover; \n            background-position: center; \n        ");
    node.textContent = '';
  };

  moneyPhoto.addEventListener('click', function () {
    modalAddPhoto.style = "\n            display: block;\n        ";
    currentNode = moneyPhoto;
  });
  hobbiesPhoto.addEventListener('click', function () {
    modalAddPhoto.style = "\n            display: block;\n        ";
    currentNode = hobbiesPhoto;
  });
  healthPhoto.addEventListener('click', function () {
    modalAddPhoto.style = "\n            display: block;\n        ";
    currentNode = healthPhoto;
  });
  lovePhoto.addEventListener('click', function () {
    modalAddPhoto.style = "\n            display: block;\n        ";
    currentNode = lovePhoto;
  });
  familyLeft.addEventListener('click', function () {
    modalAddPhoto.style = "\n            display: block;\n        ";
    currentNode = familyLeft;
  });
  familyRight.addEventListener('click', function () {
    modalAddPhoto.style = "\n            display: block;\n        ";
    currentNode = familyRight;
  });
  travelOne.addEventListener('click', function () {
    modalAddPhoto.style = "\n            display: block;\n        ";
    currentNode = travelOne;
  });
  travelTwo.addEventListener('click', function () {
    modalAddPhoto.style = "\n            display: block;\n        ";
    currentNode = travelTwo;
  });
  travelThree.addEventListener('click', function () {
    modalAddPhoto.style = "\n            display: block;\n        ";
    currentNode = travelThree;
  });
  Array.from(emojiKeyboard.children).forEach(function (imgEmoji) {
    imgEmoji.classList.add('draggable');
  });
  modalAddPhoto.addEventListener('click', function () {
    modalAddPhoto.style = "display: none;";
  });

  var searchOpaAndDelete = function searchOpaAndDelete() {
    Array.from(photoDashboard.children).filter(function (child) {
      return !child.classList.contains('opa');
    }).forEach(function (child) {
      return photoDashboard.append(child);
    });
  };

  inpPhoto.addEventListener('change', function () {
    var photo = inpPhoto.files[0];

    if (photo) {
      var reader = new FileReader();
      reader.addEventListener('load', function () {
        if (currentNode.className === "photo-board-dasboard") {
          searchOpaAndDelete();
          var div = document.createElement('div');
          div.style = "\n                        height: 94%;\n                        width: 97%;\n                        position: absolute;\n                        top: 20px;\n                        right: 15px;\n                        background-image: url(".concat(reader.result, ");\n                        opacity: 0.5;\n                        background-repeat: no-repeat;\n                        background-size: cover;\n                    ");
          div.classList.add('opa');
          photoDashboard.appendChild(div);
        } else {
          clearBackground(previewPhoto, reader.result, true);
          clearBackground(currentNode, reader.result, true);
        }
      });
      reader.readAsDataURL(photo);
    }
  });
  downloadPhoto.addEventListener('click', function () {
    inpPhoto.click();
  });
  simplePhotoOne.addEventListener('click', function () {
    var backgrpundImage = window.getComputedStyle(simplePhotoOne).getPropertyValue('background-image');

    if (currentNode.className === "photo-board-dasboard") {
      searchOpaAndDelete();
      var div = document.createElement('div');
      div.style = "\n                height: 94%;\n                width: 97%;\n                position: absolute;\n                top: 20px;\n                right: 15px;\n                background-image: ".concat(backgrpundImage, ";\n                opacity: 0.5;\n                background-repeat: no-repeat;\n                background-size: cover;\n            ");
      div.classList.add('opa');
      photoDashboard.appendChild(div);
    } else {
      clearBackground(previewPhoto, backgrpundImage);
      clearBackground(currentNode, backgrpundImage);
    }
  });
  simplePhotoTwo.addEventListener('click', function () {
    var backgrpundImage = window.getComputedStyle(simplePhotoTwo).getPropertyValue('background-image');

    if (currentNode.className === "photo-board-dasboard") {
      var div = document.createElement('div');
      searchOpaAndDelete();
      div.style = "\n                height: 94%;\n                width: 97%;\n                position: absolute;\n                top: 20px;\n                right: 15px;\n                background-image: ".concat(backgrpundImage, ";\n                opacity: 0.5;\n                background-repeat: no-repeat;\n                background-size: cover;\n            ");
      div.classList.add('opa');
      photoDashboard.appendChild(div);
    } else {
      clearBackground(previewPhoto, backgrpundImage);
      clearBackground(currentNode, backgrpundImage);
    }
  });
  simplePhotoThree.addEventListener('click', function () {
    var backgrpundImage = window.getComputedStyle(simplePhotoThree).getPropertyValue('background-image');

    if (currentNode.className === "photo-board-dasboard") {
      var div = document.createElement('div');
      searchOpaAndDelete();
      div.style = "\n                height: 94%;\n                width: 97%;\n                position: absolute;\n                top: 20px;\n                right: 15px;\n                background-image: ".concat(backgrpundImage, ";\n                opacity: 0.5;\n                background-repeat: no-repeat;\n                background-size: cover;\n            ");
      div.classList.add('opa');
      photoDashboard.appendChild(div);
    } else {
      clearBackground(previewPhoto, backgrpundImage);
      clearBackground(currentNode, backgrpundImage);
    }
  });
  simplePhotoFour.addEventListener('click', function () {
    var backgrpundImage = window.getComputedStyle(simplePhotoFour).getPropertyValue('background-image');

    if (currentNode.className === "photo-board-dasboard") {
      var div = document.createElement('div');
      searchOpaAndDelete();
      div.style = "\n                height: 94%;\n                width: 97%;\n                position: absolute;\n                top: 20px;\n                right: 15px;\n                background-image: ".concat(backgrpundImage, ";\n                opacity: 0.5;\n                background-repeat: no-repeat;\n                background-size: cover;\n            ");
      div.classList.add('opa');
      photoDashboard.appendChild(div);
    } else {
      clearBackground(previewPhoto, backgrpundImage);
      clearBackground(currentNode, backgrpundImage);
    }
  });
  simplePhotoFive.addEventListener('click', function () {
    var backgrpundImage = window.getComputedStyle(simplePhotoFive).getPropertyValue('background-image');

    if (currentNode.className === "photo-board-dasboard") {
      var div = document.createElement('div');
      searchOpaAndDelete();
      div.style = "\n                height: 94%;\n                width: 97%;\n                position: absolute;\n                top: 20px;\n                right: 15px;\n                background-image: ".concat(backgrpundImage, ";\n                opacity: 0.5;\n                background-repeat: no-repeat;\n                background-size: cover;\n            ");
      div.classList.add('opa');
      photoDashboard.appendChild(div);
    } else {
      clearBackground(previewPhoto, backgrpundImage);
      clearBackground(currentNode, backgrpundImage);
    }
  });
  btnAddSmile.addEventListener('click', function () {
    emojiKeyboard.style.display = 'block';
  }); // target elements with the "draggable" class

  interact('.draggable').draggable({
    // enable inertial throwing
    inertia: true,
    // keep the element within the area of it's parent
    modifiers: [interact.modifiers.restrictRect({
      restriction: 'parent',
      endOnly: true
    })],
    // enable autoScroll
    autoScroll: true,
    listeners: {
      start: function start(e) {
        // emojiKeyboard.style.maxWidth =
        var element = e.target;
        element.style.maxHeight = '3rem';
        photoBoardDashboard.classList.add('draggable');
        photoBoardDashboard.appendChild(element); // call this function on every dragmove event
      },
      move: dragMoveListener,
      // call this function on every dragend event
      end: function end(event) {
        emojiKeyboard.style.display = 'none';
        photoBoardDashboard.classList.remove('draggable');
      }
    }
  });

  function dragMoveListener(event) {
    var target = event.target; // keep the dragged position in the data-x/data-y attributes

    var x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx;
    var y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy; // translate the element

    target.style.webkitTransform = target.style.transform = 'translate(' + x + 'px, ' + y + 'px)'; // update the posiion attributes

    target.setAttribute('data-x', x);
    target.setAttribute('data-y', y);
  } // this function is used later in the resizing and gesture demos


  window.dragMoveListener = dragMoveListener;
  downloadDream.addEventListener('click', function () {
    html2canvas(photoBoardDashboard, {
      useCORS: true,
      allowTaint: false,
      logging: false
    }).then(function (canvas) {
      saveAs(canvas.toDataURL(), 'screen.png');
    });

    function saveAs(uri, filename) {
      var link = document.createElement('a');

      if (typeof link.download === 'string') {
        link.href = uri;
        link.download = filename; //Firefox requires the link to be in the body

        document.body.appendChild(link); //simulate click

        link.click(); //remove the link when done

        document.body.removeChild(link);
      } else {
        window.open(uri);
      }
    }
  });
  changeBAckgoundBtn.addEventListener('click', function () {
    modalAddPhoto.style = "\n            display: block;\n        ";
    currentNode = photoDashboard;
  });
  photoBucket.addEventListener('click', function () {
    document.body.outerHTML = initBody;
  });
  emojiKeyboardClose.addEventListener('click', function () {
    emojiKeyboard.style.display = 'none';
  });
};
//# sourceMappingURL=script.min.js.map
